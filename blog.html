<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="./style.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <title>Blog - Meenakshi Iyer</title>
</head>
<body>
    <nav>
        <div class="nav-container">
            <a href="index.html" class="logo">Meenakshi Iyer</a>
            <ul class="nav-links">
                <li><a href="index.html">Home</a></li>
                <li><a href="blog.html">Blog</a></li>
                <li><a href="personal.html">Personal</a></li>
                <li><a href="advice.html">Advice</a></li>
            </ul>
        </div>
    </nav>

    <div class="container">
        <section>
            <h1 id="blog-title">Trust, but Verify</h1>
            <p>Unverified thoughts of an honest user.</p>
        </section>

        <section id="blog-list">
            <h2 class="title">Posts</h2>
            <div id="posts-container">
                <p>Loading posts...</p>
            </div>
        </section>

        <section id="blog-post" style="display: none;">
            <a href="blog.html" id="back-link" style="display: inline-block; margin-bottom: 2rem; color: #666;" onclick="document.getElementById('blog-title').classList.remove('post-viewing'); return true;">‚Üê Back to all posts</a>
            <div id="post-content"></div>
        </section>
    </div>

    <script>
        // Configure marked.js
        marked.setOptions({
            breaks: true,
            gfm: true
        });

        // Blog posts data - embedded directly in HTML
        // This allows it to work when opening the file directly (file:// protocol)
        // To update: run python sync-blog.py or manually copy markdown content here
        const postsData = {
            'gradadmissions.md': `# Thoughts on Taking the Leap of Faith: An Idiot's Guide to Graduate School Admissions

**Date:** December 2025

First and foremost, there is a *ton* of advice on the internet. You are probably better off reading through those if you have specific questions you want answered. If however, you have decided to continue, I'd like to emphasize that this is merely my opinion, and it should be taken with plenty of salt. I am not resposible if you do not get into MIT. 
<!-- I have shortlisted a few below.   -->

`
        };

        // Posts metadata - add new posts here
        const posts = [
            { 
                file: 'gradadmissions.md', 
                title: 'Thoughts on Taking the Leap of Faith: An Idiot\'s Guide to Graduate School Admissions', 
                date: 'December 2025' 
            }
        ];

        // Get post name from URL parameter
        const urlParams = new URLSearchParams(window.location.search);
        const postName = urlParams.get('post');

        function loadPost(filename) {
            const markdown = postsData[filename];
            if (!markdown) {
                document.getElementById('post-content').innerHTML = '<p>Post not found.</p>';
                return;
            }
            const html = marked.parse(markdown);
            document.getElementById('post-content').innerHTML = html;
            document.getElementById('blog-list').style.display = 'none';
            document.getElementById('blog-post').style.display = 'block';
            document.getElementById('blog-title').classList.add('post-viewing');
        }

        function renderPostList() {
            const container = document.getElementById('posts-container');
            if (posts.length === 0) {
                container.innerHTML = '<p>No posts yet. Add posts to the <code>posts</code> array in blog.html!</p>';
                return;
            }

            container.innerHTML = posts.map(post => `
                <div class="blog-post-item">
                    <h3><a href="?post=${post.file}">${post.title}</a></h3>
                    <div class="blog-post-date">${post.date}</div>
                </div>
            `).join('');
        }

        // Initialize page
        if (postName) {
            loadPost(postName);
        } else {
            renderPostList();
            // Remove the class if viewing the list
            document.getElementById('blog-title').classList.remove('post-viewing');
        }
    </script>
</body>
</html>
